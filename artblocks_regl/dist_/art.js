let e,t,r,a,i,f,n=Math,o=n.min,l=n.max,s=n.floor,c=n.abs,p=n.cos,m=n.sin,y=location.href.split("#")[1],A=e=>e[0].map(((t,r)=>e.slice().reverse().map((e=>e[r]))));const d=0,x=3,D=4,b=5,u=6,E=7,h=30;let M,$,g,v,z,Y,F,B,G,w,P,Z,k,I,W,C,R,U=.95532,_=()=>{e=new Uint32Array([0,1,t=a=2,3].map((e=>parseInt(tokenData.hash.substr(8*e+2,8),16)))),r=()=>(a=e[3],e[3]=e[2],e[2]=e[1],e[1]=t=e[0],a^=a<<11,e[0]^=a^a>>>8^t>>>19,e[0]/2**32),i=(e,t)=>e[e.length*r()**(t||1)|0],f=e=>e.map((e=>[e,r()])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0])),k=[],u_tick=1e-6,G=[r()**4*2|0,r()**8*2|0,0,5*(1-r()**.3)|0,0,i([2,1],.5),(3*r()|0)-1,0,0,0,0],M=(G[0]-.5)*n.PI/2-n.PI;let o=[[8+2*r()|0,30,5,8,0],[8+2*r()|0,30,3,8,r()**4*8],[4,3+4*r()|0,0,1,1],[6+4*r()|0,10+20*r()|0,2,6,2*r()],[6+(0|r()),10+10*r()|0,0,4,r()**2*3]];G[4]=r()**.3*o.length|0,[v,z,Y,F,B]=o[G[4]],$=2+2*r()|0,Z=[],G[2]=r()**.5*8|0,g="dddddd888888555555222222aaaaaaf26b21fbb04099ca3c208b3afcec529b5de5f15bb500bbf900f5d4fee440f1faeea8dadc457b9d1d3557e6394650514ff25f5c247ba070c1b3ffe066541388d90368f1e9da2e294effd4001f20414b3f72119da419647effc857540d6eee4266f3fcf01f271bffd23fe4572e29335ca8c686669bbcf3a712".slice(30*G[2],30*(G[2]+1));let l=3*r()+1|0;g=g.substring(6*l)+g.substring(0,6*l),g=g.match(/(.{2})/g).map((e=>Number("0x"+e)/255))};function j(){let e=f([[[2,1,2],[[0,1],[0,1]],0,x],[[2,1,2],0,[[0,1],[0,1]],D],[[2,1,4],0,0,d],[[2,1,3],0,0,d],[[1,1,6],0,0,d],[[1,2,3],0,[[1,0,1]],b],[[1,1,3],0,0,d],[[2,1,2],0,0,d],[[1,1,1],0,0,d],[[1,2,1],0,0,d]].filter((e=>e[0][2]<v))).slice(0,$),t=f([[[1,4,1],[[0]],0,6],[[1,.5,1],[[0]],0,7]]);w=[...Array(v)].map((()=>Array(v).fill(0))),P=[...Array(v)].map((()=>Array(v).fill(0)));for(let a=0;a<z;a++){let f,o,p,m=0,y=-9e9,d=0,x=i(e);a>=z-B&&4!=G[3]&&(x=i(t,.7),Y=6,F=6,d=1);for(let e=0;e<F;e++){p=JSON.parse(JSON.stringify(x)),p[4]=4*r()+1|0,p[5]=4*r()+1|0,2==G[3]&&(p[4]=p[5]=1),p[6]=4*r()|0,1==G[3]&&(p[6]=0),p[7]=1,p[8]=4*r()|0,7==p[3]&&(p[8]=0);let t=()=>Array(9).fill(Array(9).fill(1));p[2]=p[2]||t(),p[1]=p[1]||t(),p[9]=[...p[0]];for(let e=0;e<p[8];e++)p[9].reverse(),p[2]=A(p[2]),p[1]=A(p[1]),p[7]=!p[7];if(p[9][0]>v/2){F<30&&F++;continue}p[10]=v%2==0?[p[9][0]/2+(r()*(v/2+1-p[9][0])|0),0,-v/2+p[9][2]/2+(r()*(v+1-p[9][2])|0)]:[p[9][0]/2+(r()*((v-1)/2+1-p[9][0])|0)+.5,0,-v/2+p[9][2]/2+(r()*(v+1-p[9][2])|0)],p[9][0]%2==v%2&&r()<1/(v-p[9][0])&&(p[9][0]%2||p[7])&&(p[10][0]=0);let a=0,i=0,d=[...Array(p[9][0])].map(((e,t)=>p[10][0]+t-(p[9][0]-1)/2)),D=[...Array(p[9][2])].map(((e,t)=>p[10][2]+t-(p[9][2]-1)/2));for(let e of d)for(let t of D)e>=0?i++:a++;let b=0,u=0,E=0,h=0;for(let e of D)for(let t of d){let r=h%p[9][0],a=s(h/p[9][0]);h++,u=l(u,w[t+v/2-.5][e+v/2-.5]),E=l(E,P[t+v/2-.5][e+v/2-.5]),1==p[2][r][a]&&(b=l(b,w[t+v/2-.5][e+v/2-.5]))}b<E||b>u?F<30&&F++:(f=[0,-n.hypot(p[10][0],p[10][2]),-b,-n.hypot(p[10][0],b-10,p[10][2]),-c(n.hypot(p[10][0],b-10,p[10][2])-v),-c(n.hypot(p[10][0],2*b,p[10][2])-v),2*b+p[10][2]][Y],(f>y||0==e)&&(y=f,m=b,o=p))}if(o&&(o[10][1]=m+o[0][1]/2,o[10][1])){if(d&&o[10][1]-o[9][1]/2==0)continue;let e=Array(o[9][0]).fill().map(((e,t)=>o[10][0]+t-(o[9][0]-1)/2)),t=Array(o[9][2]).fill().map(((e,t)=>o[10][2]+t-(o[9][2]-1)/2)),r=0;for(let a of t)for(let t of e){let e=r%o[9][0],i=s(r/o[9][0]);r++,w[t+v/2-.5][a+v/2-.5]=m+o[0][1],0==o[1][e][i]&&(w[t+v/2-.5][a+v/2-.5]=-99),P[t+v/2-.5][a+v/2-.5]=m+o[0][1]}Z.push(o);for(let e=0;e++<8;){let t=[0,0,0].map(((t,r)=>(e>>r&1)-.5));k.push([t[0]*(o[9][0]+2*o[10][0]),t[1]*o[9][1]+o[10][1],t[2]*o[9][2]+o[10][2]])}}}}let K=()=>{I=[-99,99,99,-99];let e=(e,t,r)=>[e*p(r)-t*m(r),e*m(r)+t*p(r)];k.forEach((t=>{let[r,a,i]=t;[r,i]=e(r,i,-M),[a,i]=e(a,i,-U),I[2]=o(r,I[2]),I[3]=l(r,I[3]),I[1]=o(a,I[1]),I[0]=l(a,I[0])})),I[4]=I[3]-I[2],I[5]=I[0]-I[1],I[6]=l(I[4]/1.8,I[5]/1.8,1),I[7]=I[2]+I[4]/2,I[8]=I[1]+I[5]/2};_(),j(),K(),u_colors=Z.map((e=>[e[4],e[5],e[6]])).flat();let N="";N+=Z.map(((e,t)=>`ps[${t}]=vec3(${e[10][0]},${e[10][1]},${e[10][2]});`)).join(""),N+=Z.map(((e,t)=>`ss[${t}]=vec3(${e[0][0]},${e[0][1]},${e[0][2]});`)).join(""),N+=Z.map(((e,t)=>`cs[${t}]=ivec3(${e[4]},${e[5]},${e[6]});`)).join(""),N+=Z.map(((e,t)=>`rt[${t}]=vec2(${e[8]},${e[3]});`)).join("");let S=n.min(innerWidth,innerHeight)*devicePixelRatio,H=document.createElement("canvas");H.style.width=S/devicePixelRatio+"px",H.style.height=S/devicePixelRatio+"px",S=o(S,2048);const O=H.getContext("webgl",{preserveDrawingBuffer:!0});document.body.appendChild(H),H.style.background=`rgb(${g.slice(0,3).map((e=>255*e))})`,4!=G[3]&&3!=G[3]||(H.style.background="#333"),H.width=S,H.height=S;let T=16;var X=createREGL(O);const J=X({frag:`precision highp float;\n#define A 60\n#define B 3.1415\n#define C smoothstep\n#define D vec3\n#define E float\n#define F length\n#define G vec2\nmat2 H(E I){return mat2(cos(I),-sin(I),sin(I),cos(I));}\n#define J 4e2\n#define K .001\nE L(E M){return sqrt(abs(M)*abs(M)+5e-5);}E N(E I,E O){return(I+O+L(I-O))*.5;}D ps[A];D ss[A];G rt[A];ivec3 cs[A];uniform D palette[5];uniform E aa;uniform E res;ivec3 P;E Q;E R=1e2;int S;E T(D M,D U){G V=G(F(M.xz),M.y-clamp(M.y,K,U.x));V.x-=clamp(V.x,U.z,U.y);return F(V)-K;}E W(D M){P=ivec3(0,0,-1);M.x=abs(M.x);E X=M.y+1.;for(int Y=0;Y<A;Y++){S=0;if(Y>=${Z.length})break;D Z=M;Z-=ps[Y];Z.xz*=H(rt[Y].x*B/2.);E a=.01,b=.008,c;D U=ss[Y]-2.*(a+b);c=F(Z-clamp(Z,-U/2.,U/2.))-a*1.4;if(rt[Y].y==5.){E d=F(Z.zy)-.5;E e=max(abs(Z.z)-.5,abs(Z.y+ss[Y].y/2.)-1.);E f=min(d,e);c=max(c,-f);}if(rt[Y].y==6.){E g=T(Z+D(0,1.6-a*2.,0),D(3.55,.15,0));E h=T(Z+D(0,2.-a*2.,0),D(.4-a*2.,.45,0));c=min(g,h);}if(rt[Y].y!=6.){D i=Z;G j=ss[Y].xz;i.xz+=(j-1.)/2.;i.xz=i.xz-clamp(floor(i.xz+.5),G(0.),j-1.);i.y-=ss[Y].y/2.+.02;E k=T(i,D(.24,.28,mix(K,.18,${G[1]}.)));c=min(k,c);}if(Z.z<.01&&(rt[Y].y==3.||rt[Y].y==4.)){c=N(c,dot(Z,D(0,.78*(7.-2.*rt[Y].y),-.624))-.39);}if(rt[Y].y==7.){E l=T(Z+D(0,.25-a*2.,0),D(.4-a*2.,.45,0));c=l;if(l<K){S=1;}}if(c<X){X=c;P=cs[Y];}if(X<K)break;}return X;}D m(D M){G n=G(.01,0.);return normalize(D(W(M+n.xyy)-W(M-n.xyy),W(M+n.yxy)-W(M-n.yxy),W(M+n.yyx)-W(M-n.yyx)));}void main(){${N}D o=D(0);G p,q=(gl_FragCoord.xy*2.-res)/res;for(E r=0.;r<8.;r++){if(r>=aa)break;Q=0.;E s=0.,n=1e9,t,u;E v=floor(r/2.);E w=mod(r,2.);G x=G(w/2.,v/4.)-.5;if(mod(v,2.)==0.)x.x+=.25;G p=q;p+=x*2./res;D M,y=D(p*E(${I[6]})+G(${I[7]},${I[8]}),-R),z=D(0,0,.9+.1*fract(1e3*sin(1e3*fract(F(p)))));bool AA=false;for(E Y=0.;Y<J;Y++){u=Y;M=s*z+y;M.z-=R;M.yz*=H(${U});M.xz*=H(${M});s+=n=W(M);if(t<n&&n<.01){AA=true;break;}t=n;if(n<K||n>R*2.)break;}D AB;if(!AA){D AC,AD;for(int u=0;u<5;u++){if(P[0]==u)AC=palette[u];if(P[1]==u)AD=palette[u];}D AE=AC;if(P.z==1)if(sin(M.y*B*3.)>0.)AE=AD;if(P.z==2)if(sin((M.x+fract(ps[0].x-ss[0].x/2.))*B*2.*1.5)>0.)AE=AD;if(${G[3]}==3)AE=sin((F(M)/max(E(${v}),E(${G[8]}))*2.-D(0,.3,.6))*6.28)*.5+.5;if(S==1){AE=D(0);D AF=M+fract(${v}./2.);AF=fract(AF)-.5;AE+=step(.3,F(AF.xz));AE+=step(-.1,-F(AF.xz+.1));}if(P.z==-1){AB=palette[0];if(F(AB)>.4){AB*=smoothstep(5.,0.,F(p+G(${G[6]},-1)));}if(${G[3]}==3){AB=D(.2);}if(sin(F(pow(abs(p),G(${G[5]})))*32.)>0.)AB*=.95;}else{AB=D(1,0,1);AB=(min(1.5,14./u)*.2+.8)*(dot(m(M),normalize(D(0,1,1)))*.2+.8)*AE;AB+=pow(abs(dot(m(M),normalize(D(0.,3.,1.)))),40.);}if(${G[3]}==4)AB=(D(7./u));}o+=AB;}gl_FragColor=vec4(o/aa,1);}`,vert:"attribute vec2 g;void main(){gl_Position=vec4(g,0,1);}",attributes:{g:[[1,1],[1,-4],[-4,1]]},uniforms:{res:X.prop("res"),palette:g,aa:X.prop("aa")},scissor:{enable:!0,box:{x:X.prop("x"),y:X.prop("y"),width:X.prop("ts_"),height:X.prop("ts_")}},count:3});let V=1+(S/C|0),q=0;function*L(){let[e,t,r,a]=[0,0,1,1];for(;;){for(;2*e*r<a;)yield[e,t],e+=r;for(;2*t*r<a;)yield[e,t],t+=r;r=-r,a++}}let Q=L();a=+new Date;let ee=1,te=8,re=1;C=32,R=2*(S/C/2|0)+3;let ae=0,ie=X.frame((function(){for(let e=0;e++<re;){let[e,t]=Q.next().value;J({res:S,x:S/2-C/2+C*e|0,y:S/2-C/2-C*t|0,ts_:C,aa:te}),q++}new Date-a>160&&(re=l(1,re-2)),new Date-a<30&&(re+=2),1==re?ae++:ae=l(0,ae--),ae>4&&(te=1),y&&(te=Number(y)),a=+new Date,q>R**2&&ie.cancel()}));'tx shvembldr piter stranger'
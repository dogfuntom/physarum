try{let o,a,s,r,i,l;console.log(tokenData.hash);let n=Math,f=n.min,p=n.max,c=n.floor,m=n.abs,y=n.cos,h=n.sin,d=document.createElement("div");d.classList.add("debug"),d.style.width="100%",d.style.height="100px",document.body.appendChild(d);let rotArray=e=>e[0].map(((t,o)=>e.slice().reverse().map((e=>e[o]))));const b=0,x=3,u=4,g=5,A=6,z=7,v=30;let M,k,w,D,$,E,T,S,B,C,N,H,I,P,F,U=.95532;function placeBlocks(){let e=l([{size:[2,1,2],maskTop:[[0,1],[0,1]],type:x},{size:[2,1,2],maskBottom:[[0,1],[0,1]],type:u},{size:[2,1,4],type:b},{size:[2,1,3],type:b},{size:[1,1,6],type:b},{size:[1,2,3],maskBottom:[[1,0,1]],type:g},{size:[1,1,3],type:b},{size:[2,1,2],type:b},{size:[1,1,1],type:b},{size:[1,2,1],type:b}].filter((e=>e.size[2]<D))).slice(0,k),t=l([{size:[1,4,1],maskTop:[[0]],type:A},{size:[1,.5,1],maskTop:[[0]],type:z}]);C=[...Array(D)].map((()=>Array(D).fill(0))),N=[...Array(D)].map((()=>Array(D).fill(0)));for(let o=0;o<$;o++){let a,r,l,f=0,y=-9e9,h=0,d=i(e);o>=$-S&&4!=B.ColorScheme&&(d=i(t,.7),E=6,T=6,h=1);for(let e=0;e<T;e++){l=JSON.parse(JSON.stringify(d)),l.color=4*s()+1|0,l.color2=4*s()+1|0,2==B.ColorScheme&&(l.color=l.color2=1),l.texture=4*s()|0,1==B.ColorScheme&&(l.texture=0),l.symX=1,l.rot=4*s()|0,l.type==z&&(l.rot=0);let makeMask=()=>Array(9).fill(Array(9).fill(1));l.maskBottom=l.maskBottom||makeMask(),l.maskTop=l.maskTop||makeMask(),l.span=[...l.size];for(let e=0;e<l.rot;e++)l.span.reverse(),l.maskBottom=rotArray(l.maskBottom),l.maskTop=rotArray(l.maskTop),l.symX=!l.symX;if(l.span[0]>D/2){T<v&&T++;continue}l.pos=D%2==0?[l.span[0]/2+(s()*(D/2+1-l.span[0])|0),0,-D/2+l.span[2]/2+(s()*(D+1-l.span[2])|0)]:[l.span[0]/2+(s()*((D-1)/2+1-l.span[0])|0)+.5,0,-D/2+l.span[2]/2+(s()*(D+1-l.span[2])|0)],l.span[0]%2==D%2&&s()<1/(D-l.span[0])&&(l.span[0]%2||l.symX)&&(l.pos[0]=0);let t=0,o=0,i=[...Array(l.span[0])].map(((e,t)=>l.pos[0]+t-(l.span[0]-1)/2)),h=[...Array(l.span[2])].map(((e,t)=>l.pos[2]+t-(l.span[2]-1)/2));for(let e of i)for(let a of h)e>=0?o++:t++;let b=0,x=0,u=0,g=0;for(let e of h)for(let t of i){let o=g%l.span[0],a=c(g/l.span[0]);g++,x=p(x,C[t+D/2-.5][e+D/2-.5]),u=p(u,N[t+D/2-.5][e+D/2-.5]),1==l.maskBottom[o][a]&&(b=p(b,C[t+D/2-.5][e+D/2-.5]))}b<u||b>x?T<v&&T++:(a=[0,-n.hypot(l.pos[0],l.pos[2]),-b,-n.hypot(l.pos[0],b-10,l.pos[2]),-m(n.hypot(l.pos[0],b-10,l.pos[2])-D),-m(n.hypot(l.pos[0],2*b,l.pos[2])-D),2*b+l.pos[2]][E],(a>y||0==e)&&(y=a,f=b,r=l))}if(r&&(r.pos[1]=f+r.size[1]/2,r.pos[1])){if(h&&r.pos[1]-r.span[1]/2==0)continue;let e=Array(r.span[0]).fill().map(((e,t)=>r.pos[0]+t-(r.span[0]-1)/2)),t=Array(r.span[2]).fill().map(((e,t)=>r.pos[2]+t-(r.span[2]-1)/2)),o=0;for(let a of t)for(let t of e){let e=o%r.span[0],s=c(o/r.span[0]);o++,C[t+D/2-.5][a+D/2-.5]=f+r.size[1],0==r.maskTop[e][s]&&(C[t+D/2-.5][a+D/2-.5]=-99),N[t+D/2-.5][a+D/2-.5]=f+r.size[1]}H.push(r);for(let e=0;e++<8;){let t=[0,0,0].map(((t,o)=>(e>>o&1)-.5));I.push([t[0]*(r.span[0]+2*r.pos[0]),t[1]*r.span[1]+r.pos[1],t[2]*r.span[2]+r.pos[2]])}B.BlocksNumber++,r.type==z&&B.Eyes++,r.type==A&&B.Aerials++,r.pos[0]>0&&(B.BlocksNumber++,r.type==z&&B.Eyes++,r.type==A&&B.Aerials++)}}}let findViewBox=()=>{F={top:-1e9,bottom:1e9,left:1e9,right:-1e9};let rot=(e,t,o)=>[e*y(o)-t*h(o),e*h(o)+t*y(o)];I.forEach((e=>{let[t,o,a]=e;[t,a]=rot(t,a,-M),[o,a]=rot(o,a,-U),F.left=f(t,F.left),F.right=p(t,F.right),F.bottom=f(o,F.bottom),F.top=p(o,F.top)})),F.width=F.right-F.left,F.height=F.top-F.bottom,F.scale=p(F.width/1.8,F.height/1.8,1),F.offset={x:F.left+F.width/2,y:F.bottom+F.height/2}};(()=>{o=new Uint32Array([0,1,a=r=2,3].map((e=>parseInt(tokenData.hash.substr(8*e+2,8),16)))),s=()=>(r=o[3],o[3]=o[2],o[2]=o[1],o[1]=a=o[0],r^=r<<11,o[0]^=r^r>>>8^a>>>19,o[0]/2**32),i=(e,t)=>e[e.length*s()**(t||1)|0],l=e=>e.map((e=>[e,s()])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0])),I=[],P=1e-6,B={Symmetry:s()**4*2|0,Studs:s()**8*2|0,Palette:0,ColorScheme:5*(1-s()**.3)|0,Layout:0,Height:0,Eyes:0,Aerials:0,BlocksNumber:0,BackgroundType:i([2,1],.5),BackgroundLight:(3*s()|0)-1},M=3.1415*(B.Symmetry-.5)/2-3.1415;let e=[{gs:8+2*s()|0,blocksNumber:30,fitnessFunctionNumber:5,maxTry:8,extra:0},{gs:8+2*s()|0,blocksNumber:30,fitnessFunctionNumber:3,maxTry:8,extra:s()**4*8},{gs:4,blocksNumber:3+4*s()|0,fitnessFunctionNumber:0,maxTry:1,extra:1},{gs:6+4*s()|0,blocksNumber:10+20*s()|0,fitnessFunctionNumber:2,maxTry:6,extra:2*s()},{gs:6+(0|s()),blocksNumber:10+10*s()|0,fitnessFunctionNumber:0,maxTry:4,extra:s()**2*3}];B.Layout=s()**.3*e.length|0,({gs:D,blocksNumber:$,fitnessFunctionNumber:E,maxTry:T,extra:S}=e[B.Layout]),k=2+2*s()|0,H=[],B.Palette=s()**.5*8|0,w="dddddd888888555555222222aaaaaaf26b21fbb04099ca3c208b3afcec529b5de5f15bb500bbf900f5d4fee440f1faeea8dadc457b9d1d3557e6394650514ff25f5c247ba070c1b3ffe066541388d90368f1e9da2e294effd4001f20414b3f72119da419647effc857540d6eee4266f3fcf01f271bffd23fe4572e29335ca8c686669bbcf3a712".slice(30*B.Palette,30*(B.Palette+1)),console.log("u_palette",w);let t=3*s()+1|0;w=w.substring(6*t)+w.substring(0,6*t),console.log("u_palette",w),w=w.match(/(.{2})/g).map((e=>Number("0x"+e)/255))})(),placeBlocks(),findViewBox(),console.log(w),u_colors=H.map((e=>[e.color,e.color2,e.texture])).flat();let L="";L+=H.map(((e,t)=>`positions[${t}]=vec3(${e.pos[0]},${e.pos[1]},${e.pos[2]});`)).join(""),L+=H.map(((e,t)=>`sizes[${t}]=vec3(${e.size[0]},${e.size[1]},${e.size[2]});`)).join(""),L+=H.map(((e,t)=>`colors[${t}]=ivec3(${e.color},${e.color2},${e.texture});`)).join(""),L+=H.map(((e,t)=>`roty[${t}]=vec2(${e.rot},${e.type});`)).join("");let R=Math.min(window.innerWidth,window.innerHeight)*window.devicePixelRatio,X=document.createElement("canvas");X.style.width=R/window.devicePixelRatio+"px",X.style.height=R/window.devicePixelRatio+"px",R=f(R,2048);let G=Math.floor(64e3/R),K=document.createElement("canvas");offscreenContext=K.getContext("webgl",{});var e=X.getContext("2d");document.body.appendChild(K),document.body.appendChild(X),K.style.width=K.style.height=8,X.style.background=`rgb(${w.slice(0,3).map((e=>255*e))})`,4!=B.ColorScheme&&3!=B.ColorScheme||(X.style.background="#333"),K.width=G,K.height=R,X.width=R,X.height=R;var t=createREGL(offscreenContext);console.log("regl.limits.maxViewportDims",t.limits.maxViewportDims),console.log("regl.limits.maxRenderbufferSize",t.limits.maxRenderbufferSize);const j=t({frag:`precision highp float;\n#define A 60\n#define B 3.1415\n#define C smoothstep\n#define D vec3\n#define E vec2\nfloat F(float G){return fract(54321.987*sin(987.12345*mod(G,12.34567)));}mat2 H(float I){return mat2(cos(I),-sin(I),sin(I),cos(I));}\n#define J 4e2\n#define K .001\nfloat L(float M){return sqrt(abs(M)*abs(M)+5e-5);}float N(float I,float O){return(I+O+L(I-O))*.5;}vec3 positions[A];vec3 sizes[A];vec2 roty[A];ivec3 colors[A];uniform D palette[20];uniform float aa;uniform vec2 res;uniform vec4 vb;ivec3 P;float Q;float R=1e2;float S(D M,D T,float U){M.y-=clamp(M.y,-T.x,T.x);float V=length(M.xz)-T.z;V-=clamp(V,-T.y,T.y);float S=length(E(V,M.y))-U;return S;}int W;float X(vec3 M,float Y,float Z,float a){M.y-=clamp(M.y,K,Y);vec2 b=vec2(length(M.xz),M.y);b.x-=clamp(b.x,a,Z);return length(b)-K;}float c(D M){P=ivec3(0,0,-1);M.x=abs(M.x);float d=M.y+1.;for(int e=0;e<A;e++){W=0;if(e>=${H.length})break;D f=M;f-=positions[e];f.xz*=H(roty[e].x*B/2.);float U=.01;float g=.008;float h;D T=sizes[e]-2.*(U+g);h=length(f-clamp(f,-(T)/2.,(T)/2.))-U*1.4;if(roty[e].y==5.){float S=length(f.zy)-.5;float i=max(abs(f.z)-.5,abs(f.y+sizes[e].y/2.)-1.);float j=min(S,i);h=max(h,-j);}if(roty[e].y==6.){float k=X(f+vec3(0,1.6-U*2.,0),3.6-U*2.,.15,0.);float l=X(f+vec3(0,2.-U*2.,0),.4-U*2.,.45,0.);h=min(k,l);}if(roty[e].y!=6.){D m=f;E n=sizes[e].xz;m.xz+=(n-1.)/2.;m.xz=m.xz-clamp(floor(m.xz+.5),E(0.),n-1.);m.y-=sizes[e].y/2.+.02;float o=X(m,.24,.28,mix(K,.18,${B.Studs}.));h=min(o,h);}if(f.z<0.15&&(roty[e].y==3.||roty[e].y==4.)){h=N(h,(-f.z*.8-(roty[e].y==3.?-1.:1.)*f.y-.5)/1.4142);}if(roty[e].y==7.){float p=X(f+vec3(0,.25-U*2.,0),.4-U*2.,.45,0.);h=p;if(p<K){W=1;}}if(h<d){d=h;P=colors[e];}if(d<K)break;}return d;}D q(D M){E r=E(.01,0.);return normalize(D(c(M+r.xyy)-c(M-r.xyy),c(M+r.yxy)-c(M-r.yxy),c(M+r.yyx)-c(M-r.yyx)));}void main(){D s=D(0);${L}vec2 t,u=(gl_FragCoord.xy*2.-res)/res;for(float v=0.;v<8.;v++){if(v>=aa)break;Q=0.;float Z=0.,r=1e9,w,x;float y=floor(v/2.);float z=mod(v,2.);vec2 AA=vec2(z/2.,y/4.)-.5;if(mod(y,2.)==0.)AA.x+=.25;vec2 t=u;t+=AA*2./res;t=t*.5+.5;t*=vb.zw;t+=vb.xy;t=t*2.-1.;D M,AB=D(t*float(${F.scale})+E(${F.offset.x},${F.offset.y}),-R),AC=D(0,0,.9+.1*F(length(t)));bool AD=false;for(float e=0.;e<J;e++){x=e;M=Z*AC+AB;M.z-=R;M.yz*=H(${U});M.xz*=H(${M});Z+=r=c(M);if(w<r&&r<.01){AD=true;break;}w=r;if(r<K||r>R*2.)break;}D AE;if(!AD){D AF,AG;for(int x=0;x<20;x++){if(P[0]==x)AF=palette[x];if(P[1]==x)AG=palette[x];}D AH=AF;if(P.z==1)if(sin(M.y*B*3.)>0.)AH=AG;if(P.z==2)if(sin((M.x+fract(positions[0].x-sizes[0].x/2.))*B*2.*1.5)>0.)AH=AG;if(${B.ColorScheme}==3)AH=sin((length(M)/max(float(${D}),float(${B.Height}))*2.-D(0,.3,.6))*6.28)*.5+.5;if(W==1){AH=D(0);D AI=M+fract(${D}./2.);AI=fract(AI)-.5;AH+=step(.3,length(AI.xz));AH+=step(-.1,-length(AI.xz+.1));}if(P.z==-1){AE=palette[0];if(length(AE)>.4){AE*=smoothstep(5.,0.,length(t+E(${B.BackgroundLight},-1)));}if(${B.ColorScheme}==3){AE=D(.2);}if(sin(length(pow(abs(t),E(${B.BackgroundType})))*32.)>0.)AE*=.95;}else{AE=D(1,0,1);AE=(min(1.5,14./x)*.2+.8)*(dot(q(M),normalize(D(0,1,1)))*.2+.8)*AH;AE+=pow(abs(dot(q(M),normalize(D(0.,3.,1.)))),40.);}}if(${B.ColorScheme}==4)AE=(D(7./x));s+=AE;}gl_FragColor=vec4(s/aa,1);}`,vert:"attribute vec2 position;void main(){gl_Position=vec4(position,0,1);}",attributes:{position:[[-1,-1],[-1,1],[1,-1],[-1,1],[1,-1],[1,1]]},uniforms:{res:t.prop("res"),palette:w,aa:t.prop("aa"),vb:t.prop("vb")},scissor:{enable:!0,box:{x:t.prop("x"),y:t.prop("y"),width:t.prop("w"),height:t.prop("h")}},count:6});r=+new Date;let V,_=1,q=8,O=128,W=-Math.floor(R/O),Z=0,J=t.frame((function(){j({res:[W+_,R],vb:[W/R,0,(W+_)/R,1],x:0,y:0,h:R,w:_,aa:q}),window.document.title=(W/R).toFixed(3),e.drawImage(K,W,0),W+=_,new Date-r>160&&(_=Math.max(1,_-4)),new Date-r<80&&(_=Math.min(G,_+4)),1==_?Z++:Z=0,Z>8&&(q=1),r=+new Date,W>R&&(window.document.title="👾",console.log("FINISHED in ",new Date-V),J.cancel())}))}catch(e){document.querySelector(".debug").innerHTML=e}'tx shvembldr piter stranger'
let e,o,t,a,s,i;tokenData.hash="0xcb1cb23a90b4e5ec4c54075a1887ea413e29dbe307ea74e2fecc068f5d7373ce",console.log(tokenData.hash);let l=Math,rotArray=e=>e[0].map(((o,t)=>e.slice().reverse().map((e=>e[t]))));const r=0,n=3,f=4,p=5,c=6,m=7,y=30;let h,b,d,u,x,g,z,A,v,D,k,w,M,$,C,S,T,B,Z,N,E,F,P,q,I,X=.95532,R=40,G=10,init=()=>{e=Uint32Array.from([0,1,o=a=2,3].map((e=>parseInt(tokenData.hash.substr(8*e+2,8),16)))),t=()=>(a=e[3],e[3]=e[2],e[2]=e[1],e[1]=o=e[0],a^=a<<11,e[0]^=a^a>>>8^o>>>19,e[0]/2**32),s=(e,o)=>e[e.length*t()**(o||1)|0],i=e=>e.map((e=>[e,t()])).sort(((e,o)=>e[1]-o[1])).map((e=>e[0])),S=[],T=1e-6,w={Symmetry:t()**4*2|0,Studs:t()**8*2|0,Palette:0,ColorScheme:5*(1-t()**.3)|0,Layout:0,Height:0,Eyes:0,Aerials:0,BlocksNumber:0,BackgroundType:s([2,1],.5),BackgroundLight:(3*t()|0)-1},h=3.1415*(w.Symmetry-.5)/2-3.1415;let l=[{gs:8+2*t()|0,blocksNumber:30,fitnessFunctionNumber:5,maxTry:8,extra:0},{gs:8+2*t()|0,blocksNumber:30,fitnessFunctionNumber:3,maxTry:8,extra:t()**4*8},{gs:4,blocksNumber:3+4*t()|0,fitnessFunctionNumber:0,maxTry:1,extra:1},{gs:6+4*t()|0,blocksNumber:10+20*t()|0,fitnessFunctionNumber:2,maxTry:6,extra:2*t()},{gs:6+(0|t()),blocksNumber:10+10*t()|0,fitnessFunctionNumber:0,maxTry:4,extra:t()**2*3}];w.Layout=t()**.3*l.length|0,({gs:z,blocksNumber:A,fitnessFunctionNumber:v,maxTry:D,extra:k}=l[w.Layout]),b=2+2*t()|0,C=[],w.Palette=t()**.5*8|0,g="dddddd888888555555222222aaaaaaf26b21fbb04099ca3c208b3afcec529b5de5f15bb500bbf900f5d4fee440f1faeea8dadc457b9d1d3557e6394650514ff25f5c247ba070c1b3ffe066541388d90368f1e9da2e294effd4001f20414b3f72119da419647effc857540d6eee4266f3fcf01f271bffd23fe4572e29335ca8c686669bbcf3a712".slice(30*w.Palette,30*(w.Palette+1)),console.log("u_palette",g);let r=3*t()+1|0;g=g.substring(6*r)+g.substring(0,6*r),console.log("u_palette",g),g=g.match(/(.{2})/g).map((e=>Number("0x"+e)/255))};function placeBlocks(){let e=i([{size:[2,1,2],maskTop:[[0,1],[0,1]],type:n},{size:[2,1,2],maskBottom:[[0,1],[0,1]],type:f},{size:[2,1,4],type:r},{size:[2,1,3],type:r},{size:[1,1,6],type:r},{size:[1,2,3],maskBottom:[[1,0,1]],type:p},{size:[1,1,3],type:r},{size:[2,1,2],type:r},{size:[1,1,1],type:r},{size:[1,2,1],type:r}].filter((e=>e.size[2]<z))).slice(0,b),o=i([{size:[1,4,1],maskTop:[[0]],type:6},{size:[1,.5,1],maskTop:[[0]],type:7}]);M=[...Array(z)].map((()=>Array(z).fill(0))),$=[...Array(z)].map((()=>Array(z).fill(0)));for(let a=0;a<A;a++){let i,r,n,f=0,p=-9e9,c=0,m=s(e);a>=A-k&&4!=w.ColorScheme&&(m=s(o,.7),v=6,D=6,c=1);for(let e=0;e<D;e++){n=JSON.parse(JSON.stringify(m)),n.color=4*t()+1|0,n.color2=4*t()+1|0,2==w.ColorScheme&&(n.color=n.color2=1),n.texture=4*t()|0,1==w.ColorScheme&&(n.texture=0),n.symX=1,n.rot=4*t()|0,7==n.type&&(n.rot=0);let makeMask=()=>Array(9).fill(Array(9).fill(1));n.maskBottom=n.maskBottom||makeMask(),n.maskTop=n.maskTop||makeMask(),n.span=[...n.size];for(let e=0;e<n.rot;e++)n.span.reverse(),n.maskBottom=rotArray(n.maskBottom),n.maskTop=rotArray(n.maskTop),n.symX=!n.symX;if(n.span[0]>z/2){D<30&&D++;continue}n.pos=z%2==0?[n.span[0]/2+(t()*(z/2+1-n.span[0])|0),0,-z/2+n.span[2]/2+(t()*(z+1-n.span[2])|0)]:[n.span[0]/2+(t()*((z-1)/2+1-n.span[0])|0)+.5,0,-z/2+n.span[2]/2+(t()*(z+1-n.span[2])|0)],n.span[0]%2==z%2&&t()<1/(z-n.span[0])&&(n.span[0]%2||n.symX)&&(n.pos[0]=0);let o=0,a=0,s=[...Array(n.span[0])].map(((e,o)=>n.pos[0]+o-(n.span[0]-1)/2)),c=[...Array(n.span[2])].map(((e,o)=>n.pos[2]+o-(n.span[2]-1)/2));for(let e of s)for(let t of c)e>=0?a++:o++;let y=0,h=0,b=0,d=0;for(let e of c)for(let o of s){let t=d%n.span[0],a=floor(d/n.span[0]);d++,h=max(h,M[o+z/2-.5][e+z/2-.5]),b=max(b,$[o+z/2-.5][e+z/2-.5]),1==n.maskBottom[t][a]&&(y=max(y,M[o+z/2-.5][e+z/2-.5]))}y<b||y>h?D<30&&D++:(i=[0,-l.hypot(n.pos[0],n.pos[2]),-y,-l.hypot(n.pos[0],y-10,n.pos[2]),-abs(l.hypot(n.pos[0],y-10,n.pos[2])-z),-abs(l.hypot(n.pos[0],2*y,n.pos[2])-z),2*y+n.pos[2]][v],(i>p||0==e)&&(p=i,f=y,r=n))}if(r&&(r.pos[1]=f+r.size[1]/2,r.pos[1])){if(c&&r.pos[1]-r.span[1]/2==0)continue;let e=Array(r.span[0]).fill().map(((e,o)=>r.pos[0]+o-(r.span[0]-1)/2)),o=Array(r.span[2]).fill().map(((e,o)=>r.pos[2]+o-(r.span[2]-1)/2)),t=0;for(let a of o)for(let o of e){let e=t%r.span[0],s=floor(t/r.span[0]);t++,M[o+z/2-.5][a+z/2-.5]=f+r.size[1],0==r.maskTop[e][s]&&(M[o+z/2-.5][a+z/2-.5]=-99),$[o+z/2-.5][a+z/2-.5]=f+r.size[1]}C.push(r);for(let e=0;e++<8;){let o=[0,0,0].map(((o,t)=>(e>>t&1)-.5));S.push([o[0]*(r.span[0]+2*r.pos[0]),o[1]*r.span[1]+r.pos[1],o[2]*r.span[2]+r.pos[2]])}w.BlocksNumber++,7==r.type&&w.Eyes++,6==r.type&&w.Aerials++,r.pos[0]>0&&(w.BlocksNumber++,7==r.type&&w.Eyes++,6==r.type&&w.Aerials++)}}}let H,L,findViewBox=()=>{B={top:-1e9,bottom:1e9,left:1e9,right:-1e9};let rot=(e,o,t)=>[e*cos(t)-o*sin(t),e*sin(t)+o*cos(t)];S.forEach((e=>{let[o,t,a]=e;[o,a]=rot(o,a,-h),[t,a]=rot(t,a,-X),B.left=min(o,B.left),B.right=max(o,B.right),B.bottom=min(t,B.bottom),B.top=max(t,B.top)})),B.width=B.right-B.left,B.height=B.top-B.bottom,B.scale=max(B.width/1.8,B.height/1.8,1),B.offset={x:B.left+B.width/2,y:B.bottom+B.height/2}};function setup(){L=createDiv("").class("debug").size(800,100),init(),placeBlocks(),findViewBox(),console.log(g),u_colors=C.map((e=>[e.color,e.color2,e.texture])).flat();let e="";e+=C.map(((e,o)=>`positions[${o}]=vec3(${e.pos[0]},${e.pos[1]},${e.pos[2]});`)).join(""),e+=C.map(((e,o)=>`sizes[${o}]=vec3(${e.size[0]},${e.size[1]},${e.size[2]});`)).join(""),e+=C.map(((e,o)=>`colors[${o}]=ivec3(${e.color},${e.color2},${e.texture});`)).join(""),e+=C.map(((e,o)=>`roty[${o}]=vec2(${e.rot},${e.type});`)).join("");let o=Math.min(window.innerWidth,window.innerHeight)*window.devicePixelRatio,t=document.createElement("canvas");t.style.width=o/window.devicePixelRatio+"px",t.style.height=o/window.devicePixelRatio+"px",o=min(o,2048);let s=Math.floor(64e3/o),i=document.createElement("canvas");var l=t.getContext("2d");document.body.appendChild(i),document.body.appendChild(t),i.style.width=i.style.height=8,t.style.background=`rgb(${g.slice(0,3).map((e=>255*e))})`,4!=w.ColorScheme&&3!=w.ColorScheme||(t.style.background="#333"),i.width=s,i.height=o,t.width=o,t.height=o;var r=createREGL(i);console.log("regl.limits.maxViewportDims",r.limits.maxViewportDims),console.log("regl.limits.maxRenderbufferSize",r.limits.maxRenderbufferSize);const n=r({frag:`precision highp float;\n#define A 60\n#define B 3.1415\n#define C smoothstep\n#define D vec3\n#define E vec2\nfloat F(float G){return fract(54321.987*sin(987.12345*mod(G,12.34567)));}mat2 H(float I){return mat2(cos(I),-sin(I),sin(I),cos(I));}\n#define J 4e2\n#define K .001\nfloat L(float M){return sqrt(abs(M)*abs(M)+5e-5);}float N(float I,float O){return(I+O+L(I-O))*.5;}vec3 positions[A];vec3 sizes[A];vec2 roty[A];ivec3 colors[A];uniform D palette[20];uniform float aa;uniform vec2 res;uniform vec4 vb;ivec3 P;float Q;float R=1e2;float S(D M,D T,float U){M.y-=clamp(M.y,-T.x,T.x);float V=length(M.xz)-T.z;V-=clamp(V,-T.y,T.y);float S=length(E(V,M.y))-U;return S;}int W;float X(D M){P=ivec3(0,0,-1);M.x=abs(M.x);float Y=M.y+1.;for(int Z=0;Z<A;Z++){W=0;if(Z>=${C.length})break;D a=M;a-=positions[Z];a.xz*=H(roty[Z].x*B/2.);float U=.01;float b=.008;float c;D T=sizes[Z]-2.*(U+b);c=length(a-clamp(a,-(T)/2.,(T)/2.))-U*1.4;if(roty[Z].y==5.){float S=length(a.zy)-.5;float d=max(abs(a.z)-.5,abs(a.y+sizes[Z].y/2.)-1.);float e=min(S,d);c=max(c,-e);}if(roty[Z].y==6.){float f=length(a.zx)-.15;float g=S(a+D(0,sizes[Z].y-.5,0)/2.,D(.2,.25,.2),U);c=max(c,min(f,g));}if(roty[Z].y!=6.){D h=a;E i=sizes[Z].xz;h.xz+=(i-1.)/2.;h.xz=h.xz-clamp(floor(h.xz+.5),E(0.),i-1.);h.y-=sizes[Z].y/2.+.02;float j=.24;h.y-=clamp(h.y,K,j);vec2 k=vec2(length(h.xz),h.y);k.x-=clamp(k.x,mix(K,.18,${w.Studs}.),.28);float l=length(k)-K;c=min(l,c);}if(a.z<0.15&&(roty[Z].y==3.||roty[Z].y==4.)){c=N(c,(-a.z*.8-(roty[Z].y==3.?-1.:1.)*a.y-.5)/1.4142);}if(roty[Z].y==7.){float m=S(a,D(.2,.25,.2),U);c=m;if(m<K){W=1;}}if(c<Y){Y=c;P=colors[Z];}if(Y<K)break;}return Y;}D n(D M){E o=E(.01,0.);return normalize(D(X(M+o.xyy)-X(M-o.xyy),X(M+o.yxy)-X(M-o.yxy),X(M+o.yyx)-X(M-o.yyx)));}void main(){D p=D(0);${e}vec2 q,r=(gl_FragCoord.xy*2.-res)/res;for(float s=0.;s<8.;s++){if(s>=aa)break;Q=0.;float t=0.,o=1e9,u,v;float w=floor(s/2.);float x=mod(s,2.);vec2 y=vec2(x/2.,w/4.)-.5;if(mod(w,2.)==0.)y.x+=.25;vec2 q=r;q+=y*2./res;q=q*.5+.5;q*=vb.zw;q+=vb.xy;q=q*2.-1.;D M,z=D(q*float(${B.scale})+E(${B.offset.x},${B.offset.y}),-R),AA=D(0,0,.9+.1*F(length(q)));bool AB=false;for(float Z=0.;Z<J;Z++){v=Z;M=t*AA+z;M.z-=R;M.yz*=H(${X});M.xz*=H(${h});t+=o=X(M);if(u<o&&o<.01){AB=true;break;}u=o;if(o<K||o>R*2.)break;}D AC;if(!AB){D AD,AE;for(int v=0;v<20;v++){if(P[0]==v)AD=palette[v];if(P[1]==v)AE=palette[v];}D AF=AD;if(P.z==1)if(sin(M.y*B*3.)>0.)AF=AE;if(P.z==2)if(sin((M.x+fract(positions[0].x-sizes[0].x/2.))*B*2.*1.5)>0.)AF=AE;if(${w.ColorScheme}==3)AF=sin((length(M)/max(float(${z}),float(${w.Height}))*2.-D(0,.3,.6))*6.28)*.5+.5;if(W==1){AF=D(0);D AG=M+fract(${z}./2.);AG=fract(AG)-.5;AF+=step(.3,length(AG.xz));AF+=step(-.1,-length(AG.xz+.1));}if(P.z==-1){AC=palette[0];if(length(AC)>.4){AC*=smoothstep(5.,0.,length(q+E(${w.BackgroundLight},-1)));}if(${w.ColorScheme}==3){AC=D(.2);}if(sin(length(pow(abs(q),E(${w.BackgroundType})))*32.)>0.)AC*=.95;}else{AC=D(1,0,1);AC=(min(1.5,14./v)*.2+.8)*(dot(n(M),normalize(D(0,1,1)))*.2+.8)*AF;AC+=pow(abs(dot(n(M),normalize(D(0.,3.,1.)))),40.);}}if(${w.ColorScheme}==4)AC=(D(7./v));p+=AC;}gl_FragColor=vec4(p/aa,1);}`,vert:"attribute vec2 position;void main(){gl_Position=vec4(position,0,1);}",attributes:{position:[[-1,-1],[-1,1],[1,-1],[-1,1],[1,-1],[1,1]]},uniforms:{res:r.prop("res"),palette:g,aa:r.prop("aa"),vb:r.prop("vb")},scissor:{enable:!0,box:{x:r.prop("x"),y:r.prop("y"),width:r.prop("w"),height:r.prop("h")}},count:6});a=+new Date;let f,p=1,c=8,m=0,y=Math.floor(o/64),b=-y,d=r.frame((function(){n({res:[b+p,o],vb:[b/o,0,(b+p)/o,1],x:0,y:0,h:o,w:p,aa:c}),0==m?(l.drawImage(i,0,0,.01,o,b-y/2,0,y,o),b+=y,b>o&&(b=0,m=1,c=1,c=8,console.log("(new Date() - t)",new Date-a),console.log("(new Date() - t) * size_ / 64 * 8 / 146",(new Date-a)*o/64*8/146*w.BlocksNumber/29),console.log(c),f=+new Date)):(window.document.title=(b/o).toFixed(3),l.drawImage(i,b,0),b+=p,new Date-a>160&&(p=Math.max(1,p-4)),new Date-a<80&&(p=Math.min(s,p+4)),a=+new Date,b>o&&(window.document.title="👾",console.log("FINISHED in ",new Date-f),d.cancel()))}))}'tx shvembldr piter stranger'